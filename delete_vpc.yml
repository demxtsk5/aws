---
- name: create a VPC
  hosts:
    - localhost
  vars_files:
    - ./vars/vpc.yaml 
    - ./tmp_vpc_variables.yaml

  tasks:
    - name: delete internet gateway   
      community.aws.ec2_vpc_igw:
        vpc_id: "{{ vpc_id }}"
        state: absent
    - name: delete SGs
      amazon.aws.ec2_group:
        name: "{{ sg_name }}"
        state: absent
    - name: delete VPC with subnets
      amazon.aws.ec2_vpc_net:
        name: "{{ vpc_name }}"
        state: absent
        region: "{{ region_name }}"
        aws_profile: "{{ profile }}"
        cidr_block: "{{ ip_block }}"    
...